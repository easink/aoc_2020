defmodule AOCDay03Test do
  use ExUnit.Case

  @testset """
  ..##.......
  #...#...#..
  .#....#..#.
  ..#.#...#.#
  .#...##..#.
  ..#.##.....
  .#.#.#....#
  .#........#
  #.##...#...
  #...##....#
  .#..#...#.#
  """

  @input """
  .........#..##..#..#........#..
  #...#..#..#...##.....##.##.#...
  ....#..............#....#....#.
  #.#..#.....#...#.##..#.#.#.....
  ........#..#.#..#.......#......
  .#........#.#..###.#....#.#.#..
  ........#........#.......#.....
  ...##..#.#.#........##.........
  #.#.##..###............#...#...
  ............#....#.......###.##
  ....##....##..#........#......#
  ............#.#..........#.....
  #.#....#....##...#.....#.....#.
  ......#.#.#...#.....###....#..#
  ...........##..#.........#..#.#
  ..#..#.................#..#..#.
  .#....###...#.......#.........#
  #.#.#.#...#......#.......#...#.
  .......#.#.#...#..............#
  ...##.......#..##.#.......##...
  #.#.##....#..##..##..###...###.
  .#......##.##.#....#.##........
  ..###.............##..##..#....
  .....#.#...........#..##..##...
  .###.#.#......#.....#........##
  ...#.......#...##..#..#..#.....
  ..............#.#..##.##..##..#
  #..#.#......#............#.....
  ........#..#....#..............
  ...#...#..............#.#####..
  ...##......#........#.#...#....
  ..##......#............#..#..#.
  ....#.........#.#.#.....###.#..
  #....#........#........#....#.#
  .....#...#..##.....##...#.....#
  #...#.#.#...##..##.###.#.#.....
  ......#.#..........#...#.##....
  ..............##...#..#.......#
  ........##.....#.....#.#....#..
  ..............#..#..#...#.....#
  ##......##.......##...#.#....#.
  .....#.............#.#.........
  #.........##..#..#.........##..
  ..#..#.....#####.........##.#..
  .......##.#......#........#....
  #.................#.#...#....#.
  ...#........#.###.##.##.....#..
  #.....##..#...##.#.#......#....
  .....#..#.#..........##..#.##..
  ..###.............#..#..#...#..
  ...###..#...#.....##..........#
  #.......#.#...#....#..##..#..#.
  .#..#.........#..............#.
  ..######.....#....##......#....
  #..##...#......#..#.#....#.....
  .#...................#.#.....#.
  ..#...#.#..#.#......#..#...#..#
  ..##..##.#.##.........#.#.#....
  ...#...#...........#..##.##...#
  #...#....#....#....#..#.##..#..
  ..#.##....#....###..#..........
  #.#..##.#.#...##.#..#.##..#.#..
  #......##...#.#..........#..#..
  #.#...#..#...#.#.#..#........#.
  #.#.##.#..#...#..#.#.##........
  .....#......#........#..#......
  ...#....#.#....#...............
  ....#..###..#....#..#....#....#
  .#........###..........##.##.#.
  #.#......##....##...##.#......#
  #..##.##...#...........##.#.#..
  .#.....#.#...#.................
  ##..........#..#....#.....#...#
  ....#.#..........##..#.....#.##
  #.#..#..#..##..........#.......
  ..#.#.###......................
  ......##..##.....#..##.##....#.
  ...#.......#.##....#......#....
  ...#...#........#...#.#...#..##
  ##...#....#.#...#.#.##..##...#.
  ...#.....#...#...#....###.#..#.
  ..#.#..#........#......#..##..#
  ...#......#...#.#.##...##.#.#.#
  ....#.#....#....#.....#.....##.
  .....#.#..##.#....##....##.....
  .#...###..#.....#............#.
  #..#.#.#..#..#...#....#...#....
  #.....#..#...#................#
  ..........#..#.......#......#.#
  ...#..#......#...#......#......
  .#.#.....#.#.#.#......#..#..#..
  .....#.........#.#.#.....##.#..
  .....#.#.....#..#..#..#.....###
  ##....#......##....##.#....#.#.
  #####........#..........##.....
  .#...##...#...#.......#....#...
  #.#.##...##...##..##........#..
  #.#..............#.#...#...###.
  ...#.....##..#.........#....#.#
  #.#....#....#..##.#..#...#.....
  ..#....#.#..#...#...##.....#...
  ....#...#......................
  ..#...#.......#..#...##....#...
  .#........#...#.....##.##...#..
  #......#..............#..#..#..
  ...........#.#..#.#.#....#....#
  .##..##.......#...#..#.....#..#
  ...#.........#.........###..#..
  ...#.##....#....#.....#.....#..
  .#.#.#.........#.#.#....#....#.
  ...#..........##..#....#.#.....
  ...#....##................#....
  #....##..#..#........##...#....
  #...#...##.#............#....#.
  ##..#....#...#...............#.
  ..........#.#...#..##..#.#.....
  ..##...##..#....#.#......#.....
  .......#......#.#.....#.....##.
  #...###.....##..##....#.#....#.
  .###......#.....#.#............
  #.....#.....####.##....#..#....
  ......###.............#......##
  .........##.......##..#..#..#..
  .#.......#....#...#...#.#......
  #...#..#...#........#...##..#..
  .#....#........#.........##..#.
  ..............##.#...##..#.##.#
  .#....#...#....#......#..#.....
  #....##.#...#.#.....###..#....#
  #.......##.#..###..............
  #..#..#..#......#.#..#...#..#.#
  .......#.#.#..#..#...#..#......
  .#..#......#.....#......##..##.
  ....#....#.......#.......#.#.##
  .......#.#................#...#
  #.#.....#.......#.#........#...
  .....#....##...#......#.....##.
  .#......#.#...#..#....#....#.##
  ##...#.###.#....#..#....#.#...#
  ....#.##..##.#.............#...
  #..#.............##.......#.#..
  ##.#..#..#.#...........###...##
  .#.#.....#......###........#...
  #.#...#.#....##......#.#....#..
  #.........#..........#.........
  .......#....#...#..#.....#...##
  .......................#...#..#
  .###...........##...#........##
  #.#....######.#........#..##.#.
  ..#.##.#...#.#.......#.##.##..#
  #.............###..#.##.#......
  ...#..##......#...#..###.....#.
  ..........#.....#..#...##..#...
  ..##..........#.#..#.....#...#.
  ...#.......#.....##.........#..
  #..#.#...#..#...###...#...#.#..
  #.##....#..#.#.......#..#..#...
  ..#.##.#......#.#......#....#..
  ..........#...##.....###.......
  ...#...##..#......#...##.......
  ....#........#.#.......#..###..
  .....#.#..........##.#..#..#.#.
  .............##.....#.#..##....
  ...#...............##...#......
  ....#......#..#....#...##..#...
  .##.#....#.#.....#.#.........#.
  .....#.###....#..###..#.#.....#
  .#.........##.........##...#...
  ..#.....###....##..........#..#
  ........#..#.#.#..#.......#..##
  ..#.#..#.#............#.##.#..#
  .#....#.....#..#...#.......##..
  .#...........#.#..#..###.###...
  ..#.....#..#........#.#........
  .#........##........#..#.##....
  ......#.....##........##..#....
  .#..................##....#.#..
  .#..#.#..#.#...#........#......
  ...#..##.#......#..#..........#
  ....#.##...#....##.............
  #....#.##....##.###..#..#..#...
  ..........#..#...##.##....#..#.
  .###.#.....#...#...#...#.......
  ............#...............#.#
  #....#...#......#....#.#.#.#.##
  ...#..........#.#.#.....###....
  #.#...##...#..#.....###...#....
  ......#...#..#..#..#.##...##...
  ...#..#.#....#...#.#.........##
  ##....#..###.#.##.....##.......
  ..#.#...#..##.......#.#.......#
  ##......#...........#......#...
  .......#..###....###..##.#...##
  .........#.....#..#.......##..#
  .......#.##..#....#...#.#...#..
  #..#.#..................##.#..#
  ...#..#..#.....#..#........#...
  ...#.#..###..#.....##...#....#.
  ..#..#......#...........#...#..
  #...##.##..###.......##........
  .#.....#..#....#.....#.##....#.
  #..#........#.#....#..#...#.###
  ..#...#.#.#.....#.....#..#.....
  .##.............#.#......##...#
  .#....#####............#.....##
  #.###.......#.#...##.....#.....
  ......#.##..#...#..#..##.#..##.
  ......#.#...##.....#...#....##.
  ....#............#...#...#....#
  .........##.#.#....#....#....##
  .#...##.#...#.......#.##....#.#
  #....#.#...#.#...#.#.#...#.....
  .#.#.........##..#..#..........
  .#.........#.#.....#..#.#..###.
  ....##.#.#..........#..####....
  ....#..#.#.#...#...#..#....#...
  ..#.#...#...##.......#.#.#..#..
  ...##...#......#.....#.#...#..#
  ......#.###.#.......##...#...#.
  .....#.#.#......##..........###
  ##.#.#.#..#....#...............
  .#.#.##.......#....#.#.....#..#
  .........#...#.#..#.......#....
  ....#.####.#......#...#...##...
  #..#..#..#..#....#...##.....##.
  ......####.#..##..#.....##.....
  ##.#.........#........#..#.#...
  .#.#....#....#.......#.#....##.
  ....#....#.......##..#.....#...
  .#......#..#....#.#............
  #..#.#.##.....#..#.#.#.#.#.##..
  .#.....#.....#...#..#.#...#.#..
  .#.#.##............#.#.#.#.#.#.
  .##..........#.....#...###.....
  #.#...#...#................#.#.
  ##...#.##.....#.....#.#.##.....
  ####.....##..........#......#..
  #.............#..............#.
  .###....#.#...#..#..#..#.......
  ..#.#.....#...#..#..####.......
  ...#.#..#........#..##..#..#.##
  .#........#..........#.#...##..
  .#.......#.#.#..#...#..#.#...##
  .#.....##......##..............
  ......#..#.#.##...##.#.....#...
  .........#.#...##.....##....#.#
  .....##...#........#..#.#..#.#.
  .#.##..#.....##...#...###.#.#..
  ...##...#...#..#.#..#..........
  ##..............#...#...#.#..#.
  ......#..#......#..#.....#...#.
  .......#...#..#....#.....#.....
  ..##.....##..#.#........#......
  .###.#...#.....................
  ..#...#.................#...#..
  #..#.##...####.............#...
  .##....#..####.......#.........
  #..#...###...#...#..#..##......
  ....#.##.#.#.........#.....#..#
  .....#...#.....#.#.#.##.#...##.
  .............#........#.....#..
  ...##.###.#....##.......#..#...
  #..#....#....#.#............#..
  .........#.##........##.....#..
  .........#.#.#..#..#.......#...
  .......#.#..#.......#.....#.#..
  ##.#.....##...##.....#.#.......
  .#.#.#......##.##.#.........#..
  ..#.##..###.....###.........##.
  .#......#..#..##...#.#...##.#.#
  ......#.#............#.....#...
  ###.#..#..#..#..#.##...#.......
  .#.#.##..###....#......##..###.
  #...#.#.#..#..#..##.#.##....#..
  ..#...#...####...#......####.##
  ..##.#.####........#..#......#.
  .#..#.......#...#.#.........#..
  ........#.#....#..#####..#.....
  .#...........#..#..#..#...#....
  ....#....#...#.................
  ....##..#....##....#..#....#.##
  ....#.##.....###...#...##.##...
  ......##.#..##.#.#.#....#.#.#..
  ##.#...###....#.#..#.#.###....#
  ......###..#..#..........##...#
  ..........#.##...##..#....##.#.
  .#...#.#..#.#.#..#.....#.......
  .#....#..#.#..#.#...##.#.#.....
  .##.....#...#..##.#........#...
  ....#......#.........#....#..##
  .#..#.#.#.#..#..#.#.........#..
  .........#.....#...#....#......
  #..#..#........#...#.#.........
  ...#.#.#...##.#.#...#..#......#
  #.#.#.#........#...#..#.....#..
  .###..#..#..###..#..#..........
  .....#......#.#..#...#.......#.
  ##.##.........#.......##.......
  #...##.......#..#.#.......#....
  #..#..#.....#...#......#.......
  .#..#..#.##....#.#..#...#...#..
  .#...#.....#..#.........#..#...
  ...#.#.#.......#....#..##.....#
  .........#..##.#..#..#.#.......
  #.##.....##..###..#..#..#.##...
  ........#......#...##...###..##
  .##....##..#..#..###......#....
  ............##......#...#..##..
  ...##.......#......#...##.##..#
  ...#..#..#.#...####.#.......#..
  ..#.##..#....#......#.#.....#..
  ..#.##..............#..##.....#
  .....##....#......#....#......#
  ......#..#......#.........#..#.
  ...#.##.###...###..#.##........
  ..........####.#.##.....#..#.##
  #...##...........#...........##
  #.#..#.#....#.#..#....##......#
  .......#...#.....#......#.#.##.
  ....#.##..##..........#..#.....
  #.#.#...#......#...#.....#.##.#
  ........#.......#..##.....##...
  .....####.#....#.#.............
  """

  test "part 1, testset" do
    assert AOC.Day03.part1(@testset) == 7
  end

  test "part 1, input" do
    assert AOC.Day03.part1(@input) == 156
  end

  test "part 2, testset" do
    assert AOC.Day03.part2(@testset) == 336
  end

  test "part 2, input" do
    assert AOC.Day03.part2(@input) == 3_521_829_480
  end
end
